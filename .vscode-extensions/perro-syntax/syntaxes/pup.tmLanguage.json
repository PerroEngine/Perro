{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "Pup",
	"patterns": [
		{
			"include": "#function-definition"
		},
		{
			"include": "#comments"
		},
		{
			"include": "#special-event-handler"
		},
		{
			"include": "#event-handler"
		},
		{
			"include": "#struct-definition"
		},
		{
			"include": "#enum-definition"
		},
		{
			"include": "#at-symbol"
		},
		{
			"include": "#keywords"
		},
		{
			"include": "#enum-access"
		},
		{
			"include": "#module-access"
		},
		{
			"include": "#type-access"
		},
		{
			"include": "#types"
		},
		{
			"include": "#strings"
		},
		{
			"include": "#numbers"
		},
		{
			"include": "#operators"
		},
		{
			"include": "#function-call"
		},
		{
			"include": "#punctuation"
		},
		{
			"include": "#builtins"
		},
		{
			"include": "#script-name"
		},
		{
			"include": "#self-access"
		},
		{
			"include": "#constants"
		},
		{
			"include": "#fields"
		},
		{
			"include": "#variables"
		}
	],
	"repository": {
		"comments": {
			"patterns": [
				{
					"name": "comment.line.double-slash.pup",
					"match": "//.*$"
				},
				{
					"name": "comment.line.number-sign.pup",
					"match": "#.*$"
				}
			]
		},
		"special-event-handler": {
			"patterns": [
				{
					"match": "\\b(on)\\s+(init|update|fixed_update|draw)(?=\\s*\\()",
					"captures": {
						"1": {
							"name": "keyword.control.event.special.pup"
						},
						"2": {
							"name": "entity.name.function.special.pup"
						}
					}
				}
			]
		},
		"event-handler": {
			"patterns": [
				{
					"begin": "\\b(on)\\s+",
					"beginCaptures": {
						"1": {
							"name": "keyword.control.event.pup"
						}
					},
					"end": "(?=\\s*\\()",
					"patterns": [
						{
							"name": "entity.name.function.call.pup",
							"match": "[a-zA-Z_][a-zA-Z0-9_]*"
						}
					]
				}
			]
		},
		"at-symbol": {
			"patterns": [
				{
					"match": "(@)([a-zA-Z_][a-zA-Z0-9_]*)",
					"captures": {
						"1": {
							"name": "punctuation.definition.annotation.pup"
						},
						"2": {
							"name": "entity.name.annotation.pup"
						}
					}
				}
			]
		},
		"enum-access": {
			"patterns": [
				{
					"match": "\\b([A-Z]+[A-Z0-9_]*)(\\.)([a-zA-Z_][a-zA-Z0-9_]*)",
					"captures": {
						"1": {
							"name": "constant.other.allcaps.pup"
						},
						"2": {
							"name": "keyword.operator.access.pup"
						},
						"3": {
							"name": "constant.other.enum-value.pup"
						}
					}
				}
			]
		},
		"module-access": {
			"patterns": [
				{
					"match": "\\b([A-Z][a-zA-Z0-9_]*)(\\.)([A-Z][a-zA-Z0-9_]*)",
					"captures": {
						"1": {
							"name": "entity.name.type.pup"
						},
						"2": {
							"name": "keyword.operator.access.pup"
						},
						"3": {
							"name": "entity.name.type.submodule.pup"
						}
					}
				}
			]
		},
		"type-access": {
			"patterns": [
				{
					"match": "\\b([A-Z][a-z][a-zA-Z0-9_]*)(\\.)([a-zA-Z_][a-zA-Z0-9_]*)",
					"captures": {
						"1": {
							"name": "entity.name.type.pup"
						},
						"2": {
							"name": "keyword.operator.access.pup"
						},
						"3": {
							"name": "entity.name.function.call.pup"
						}
					}
				}
			]
		},
		"self-access": {
			"patterns": [
				{
					"match": "\\b(self)(\\.)([a-zA-Z_][a-zA-Z0-9_]*)",
					"captures": {
						"1": {
							"name": "variable.language.self.pup"
						},
						"2": {
							"name": "keyword.operator.access.pup"
						},
						"3": {
							"name": "variable.other.field.pup"
						}
					}
				}
			]
		},
		"keywords": {
			"patterns": [
				{
					"name": "keyword.control.pup",
					"match": "\\b(if|else|for|in|pass)\\b"
				},
				{
					"name": "keyword.declaration.variable.pup",
					"match": "\\bvar\\b"
				},
				{
					"name": "keyword.other.pup",
					"match": "\\b(fn|extends|import|new|as|expose|super)\\b"
				},
				{
					"name": "keyword.control.pup",
					"match": "\\b(on)\\b"
				},
				{
					"name": "keyword.declaration.annotation.pup",
					"match": "@[a-zA-Z_][a-zA-Z0-9_]*"
				},
				{
					"name": "constant.numeric.boolean.pup",
					"match": "\\b(true|false)\\b"
				},
				{
					"name": "variable.language.self.pup",
					"match": "\\bself\\b"
				}
			]
		},
		"script-name": {
			"patterns": [
				{
					"match": "(@script)\\s+([A-Z][a-zA-Z0-9_]*)",
					"captures": {
						"1": {
							"name": "keyword.declaration.annotation.pup"
						},
						"2": {
							"name": "entity.name.script.pup"
						}
					}
				},
				{
					"match": "(extends)\\s+([A-Z][a-zA-Z0-9_]*)",
					"captures": {
						"1": {
							"name": "keyword.other.pup"
						},
						"2": {
							"name": "entity.name.type.class.pup"
						}
					}
				}
			]
		},
		"function-definition": {
			"patterns": [
				{
					"match": "\\b(fn)\\s+([a-zA-Z_][a-zA-Z0-9_]*)",
					"captures": {
						"1": {
							"name": "keyword.other.pup"
						},
						"2": {
							"name": "entity.name.function.pup"
						}
					}
				}
			]
		},
		"struct-definition": {
			"patterns": [
				{
					"match": "\\b(struct)\\s+([a-zA-Z_][a-zA-Z0-9_]*)",
					"captures": {
						"1": {
							"name": "keyword.declaration.struct.pup"
						},
						"2": {
							"name": "entity.name.type.struct.pup"
						}
					}
				}
			]
		},
		"enum-definition": {
			"patterns": [
				{
					"begin": "\\b(enum)\\s+([A-Z][A-Za-z0-9_]*)\\s*(\\{)",
					"beginCaptures": {
						"1": {
							"name": "keyword.declaration.enum.pup"
						},
						"2": {
							"name": "constant.other.allcaps.pup"
						},
						"3": {
							"name": "punctuation.definition.block.begin.pup"
						}
					},
					"end": "\\}",
					"endCaptures": {
						"0": {
							"name": "punctuation.definition.block.end.pup"
						}
					},
					"patterns": [
						{
							"name": "constant.other.enum-value.pup",
							"match": "\\b[A-Z][a-zA-Z0-9_]*"
						},
						{
							"include": "#comments"
						}
					]
				}
			]
		},
		"function-call": {
			"patterns": [
				{
					"match": "\\[([a-zA-Z_][a-zA-Z0-9_]*)\\]\\s*(?=\\()",
					"captures": {
						"1": {
							"name": "entity.name.function.call.pup"
						}
					}
				},
				{
					"name": "entity.name.function.call.pup",
					"match": "\\b[a-z_][a-zA-Z0-9_]*(?=\\s*\\()"
				}
			]
		},
		"fields": {
			"patterns": [
				{
					"name": "variable.other.field.pup",
					"match": "(?<=\\.)[a-z_][a-zA-Z0-9_]*"
				}
			]
		},
		"variables": {
			"patterns": [
				{
					"name": "variable.other.pup",
					"match": "\\b[a-z_][a-zA-Z0-9_]*(?!\\s*[:(])\\b"
				}
			]
		},
		"constants": {
			"patterns": [
				{
					"name": "constant.other.allcaps.pup",
					"match": "\\b[A-Z][A-Z0-9_]*\\."
				}
			]
		},
		"types": {
			"patterns": [
				{
					"name": "storage.type.pup",
					"match": "\\b(int|float|bool|string)\\b"
				},
				{
					"name": "entity.name.type.pup",
					"match": "\\b[A-Z]+[a-z][a-zA-Z0-9_]*\\b"
				}
			]
		},
		"strings": {
			"patterns": [
				{
					"name": "string.quoted.double.pup",
					"begin": "\"",
					"end": "\"",
					"patterns": [
						{
							"name": "constant.character.escape.pup",
							"match": "\\\\."
						}
					]
				}
			]
		},
		"numbers": {
			"patterns": [
				{
					"name": "constant.numeric.float.pup",
					"match": "\\b\\d+\\.\\d+\\b"
				},
				{
					"name": "constant.numeric.integer.pup",
					"match": "\\b\\d+\\b"
				}
			]
		},
		"operators": {
			"patterns": [
				{
					"name": "meta.operator.script-access.pup",
					"match": "::"
				},
				{
					"name": "keyword.operator.arithmetic.pup",
					"match": "(\\+\\+|--|\\+|\\-|\\*|/|%|\\*\\*|\\+\\=|\\-\\=|\\*\\=|/\\=)"
				},
				{
					"name": "keyword.operator.comparison.pup",
					"match": "(==|!=|<=|>=|<|>)"
				},
				{
					"name": "keyword.operator.assignment.pup",
					"match": "="
				},
				{
					"name": "keyword.operator.access.pup",
					"match": "\\."
				}
			]
		},
		"punctuation": {
			"patterns": [
				{
					"name": "punctuation.definition.group.begin.pup",
					"match": "\\("
				},
				{
					"name": "punctuation.definition.group.end.pup",
					"match": "\\)"
				},
				{
					"name": "punctuation.definition.block.begin.pup",
					"match": "\\{"
				},
				{
					"name": "punctuation.definition.block.end.pup",
					"match": "\\}"
				},
				{
					"name": "punctuation.definition.array.begin.pup",
					"match": "\\["
				},
				{
					"name": "punctuation.definition.array.end.pup",
					"match": "\\]"
				},
				{
					"name": "punctuation.separator.pup",
					"match": "(,|;|:)"
				}
			]
		},
		"builtins": {
			"patterns": [
				{
					"name": "support.variable.builtin.pup",
					"match": "\\bsuper\\b"
				}
			]
		}
	},
	"scopeName": "source.pup"
}
